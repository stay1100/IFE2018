## 打卡
* 日期：2018年5月3日
* 本节学习用时：4h
* flag：
  * 66天将之前零碎的学习作整体梳理，形成自己的知识体系。
  * html/css/js/jquery，vue/react/angular，node.js，初步形成自己的技术栈。
  * 务必实战实战再实战，多做项目。
  * 2018年9月份之前务必找到一份工作，进入行业内。

## 我们输入网址试图打开一个网站的时候，到底发生了什么？

* 浏览器根据我们输入的网址，调用浏览器引擎，分析并加载这个url地址。

* 同时通过DNS解析器将这个url地址解析成IP地址，然后浏览器根据这个IP地址寻找对应的web服务器。

* 浏览器客户端就会向网站所在的web服务器发出get请求（请求报文，主要是拿html文档）。

  > 这里浏览器和服务器的会话主要是通过HTTP协议进行的。

* web服务器开始处理请求，它进入部署好的application应用服务器，找到对应的请求**处理逻辑**，这期间还可能进行读取服务器缓存或查询数据库等操作。

* web服务器处理完请求后，会给浏览器发送响应报文。

* 浏览器开始下载接收到的HTML文件，并解析结构，建立DOM文档树。并根据HTML中的标记请求，下载指定的MIME类型文件（如CSS\JS脚本等），同时还会设置缓存内容。

* 万事俱备，最后就会解析渲染DOM，同时根据CSS绘制渲染布局，根据JS操作DOM，完成整个页面展示。

访问一个网站时的可能参与者：浏览器客户端、web服务器、应用服务器（脚本）、Web Framework、数据库

> 简要来说，如果要开发一个web应用，要部署好web服务器，然后使用web framework框架简化开发过程，最后通过应用服务器把这个应用部署到网络上。

> 客户端脚本语言：JavaScript;
> 服务器端脚本语言：php、python等.

参考阅读：

1. [Web 建站技术中的各种名词](https://www.zhihu.com/question/22689579)

2. [日夜谈——后端语言和web服务器的了解](https://www.jianshu.com/p/8da3e2dae61f)

3. [What is the difference between application server and web server?
](https://stackoverflow.com/questions/936197/what-is-the-difference-between-application-server-and-web-server/936257#936257)

## 浏览器应用基础

浏览器组成结构：用户界面、浏览器引擎、渲染引擎、网络功能模块、JS引擎、UI后端、数据持久化存储。

* 浏览器渲染引擎主要用来解析HTML文档和CSS文档。是它将CSS规则应用到HTML标签元素上，并将HTML渲染到浏览器窗口中显示出来。主要分为四个步骤：解析HTML构建DMO树、构建DOM渲染树、渲染树布局、绘制渲染树。

  > 渲染引擎（浏览器内核）：Trident、Gecko、Presto、Webkit（Blink也算是Webkit的分支，移动端应用在使用）

## 前端相关网络通信协议

* HTTP协议：使用应答请求模式进行普通网络资源的请求加载。几乎所有的前端资源都是通过HTTP协议请求完成的。不过现在更多的是使用升级版的HTTPS协议（基于SSL安全套接字层），HTTPS协议可以有效防止HTTP劫持和DNS劫持。

  > HTTPS协议通过加入SSL层来加密HTTP数据进行安全传输，同时启用默认的443端口进行数据传输。具体安全传输过程主要靠**公钥和私钥机制**实现。

* 前端实时通信协议

  * HTML5的WebSocket协议：浏览器端与服务器端建立的实时通信协议，可以实现类似Socket方式的消息通信。它的优势是能进行浏览器和服务器之间的**双向数据实时通信**。缺点则是兼容性差，目前还不支持IE11以下或Android 4.4版本以下的浏览器。

    > HTTP协议支持使用Upgrade头域设置进行协议扩展切换，这样就可以实现从HTTP协议切换到其他协议进行通信。

  * Poll轮询：基于现有的HTTP协议。浏览器会采用定时向服务器发送请求轮询的方法不断发送或拉取消息。相对来说实时性较差，而且没有新消息时依然需要不断轮询，比较消耗系统资源。

  * Long-Poll长轮询：基于Poll轮询实现原理，只不过对HTTP请求设置了一个较长的Timeout等待时间。服务器只要在这一段时间内进行响应，就会立即返回结果；这段时间如果没有响应，浏览器端将自动响应超时，并发起一个新的请求。相比Poll轮询来说，节省资源、实时性更好，不用持续定时发送网络请求。
（Long-Poll目前典型的一个应用场景：网站通过对应的移动客户端进行扫描二维码登录，登录成功后桌面浏览器会自动响应并跳转进入已登录后的页面）

  * DDP分布式数据协议：新型的实时通信协议（也是由于兼容性未被广泛使用）。DDP使用JSON数据格式进行数据传输通信，对前端开发者可以说非常友好(面向未来)。

* 移动端web脚本与移动端Native原生程序进行交互的协议（以后再了解）

## 现代web前端技术趋势：

* 前端开发框架

* 模块化和组件化

  * 力求独立、简单、解耦合。

  * HTML5的组件化规范：Web Component。（了解一下）

* 资源异步加载

* cookie和本地缓存

* 响应式开发。

## 关于web性能的一些了解

可从以下角度简单分析一个web网站的性能：

* 浏览器发起的直接网络请求及图片请求和用户操作触发的间接网络请求；

* 页面内容容积；

* 页面加载时间(ms)等。

#### 检测页面加载时间(ms)及优化的工具:

* Chrome DevTools的performance(以前的timeline)和network

* 页面性能检测网站，如WebPagetest

参考阅读：

1. [怎样测试页面加载时间？](https://www.zhihu.com/question/22776517)

2. [chrome里的performance如何使用？](https://www.zhihu.com/question/20644454)
